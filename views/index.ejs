<!DOCTYPE html>
<html>

<head>
	<title>Amazing Book Page Flip Effect Using Turn.js | jQuery Plugin</title>
	<style type="text/css">
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		html, body {
			width: 100%;
			height: 100%;
			overflow: hidden;
			background: #000;
		}

		body {
			display: flex;
			justify-content: center;
			align-items: center;
		}

		#album {
			width: 100vw;
			height: 100vh;
			position: absolute;
			top: 0;
			left: 0;
		}

		#album .page {
			width: 100%;
			height: 100%;
			position: relative;
			margin: 0;
			padding: 0;
			overflow: hidden;
		}

		#album video {
			width: 100%;
			height: 100%;
			min-width: 100%;
			min-height: 100%;
			object-fit: cover;
			object-position: center;
			display: block;
			margin: 0;
			padding: 0;
			border: none;
			outline: none;
			vertical-align: top;
			position: absolute;
			top: 0;
			left: 0;
		}
	</style>
</head>

<body>

	<div id="album">
		<div class="page">
			<video src="video1.mp4" muted loop autoplay></video>
		</div>
		<div class="page">
			<video src="video2.mp4" muted loop autoplay></video>
		</div>
		<div class="page">
			<video src="video3.mp4" muted loop autoplay></video>
		</div>
		<div class="page">
			<video src="video4.mp4" muted loop autoplay></video>
		</div>
		<div class="page">
			<video src="video5.mp4" muted autoplay></video>
		</div>
		<div class="page">
			<video src="video6.mp4" muted autoplay></video>
		</div>
	</div>

	<script src="https://code.jquery.com/jquery-3.5.1.min.js"
		integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script src="turn.js"></script>
	<script>
		$('#album').turn({
			gradients: true,
			acceleration: true,
			duration: 1500
		});

		// Socket.IO connection to backend
		const socket = io('http://localhost:3000');

		// Listen for flip commands from sensor
		socket.on('flip', function(direction) {
			if (direction === 'next') {
				$('#album').turn('next');
			} else if (direction === 'previous') {
				$('#album').turn('previous');
			}
		});

		// Keyboard controls (optional)
		$(document).keydown(function (e) {
			let command = '';
			switch (e.keyCode) {
				case 37: // Left arrow key
					command = 'R';
					$('#album').turn('previous');
					break;
				case 39: // Right arrow key
					command = 'L';
					$('#album').turn('next');
					break;
			}

			// Send keyboard command to server
			if (command) {
				socket.emit('keyCommand', command);
			}
		});
	</script>
</body>

</html>